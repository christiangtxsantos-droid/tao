<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SISTEMA TAO | OS-X</title>
    <style>
        :root { --bg: #050508; --accent: #00f2ff; --card: #0d0d12; --text: #e0e0e6; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; margin: 0; display: flex; height: 100vh; }
        nav { width: 250px; border-right: 1px solid #222; padding: 20px; display: flex; flex-direction: column; }
        .nav-item { padding: 10px; cursor: pointer; border: 1px solid transparent; margin-bottom: 5px; color: #888; }
        .nav-item.active { border-color: var(--accent); color: var(--accent); }
        main { flex-grow: 1; padding: 30px; overflow-y: auto; }
        .view { display: none; }
        .view.active { display: block; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .card { background: var(--card); border: 1px solid #222; padding: 15px; border-radius: 8px; }
        .card img { width: 100%; height: 150px; object-fit: cover; border-radius: 4px; }
        .btn { background: var(--accent); color: #000; border: none; padding: 10px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
        textarea, input { background: #000; color: #fff; border: 1px solid #333; padding: 10px; width: 100%; box-sizing: border-box; }
    </style>
</head>
<body>

<nav>
    <h2 style="color: var(--accent)">TAO SYSTEM</h2>
    <div class="nav-item active" onclick="showView('inv')">üéí INVENT√ÅRIO</div>
    <div class="nav-item" onclick="showView('ideas')">üåç IDEIAS</div>
    <div class="nav-item" onclick="showView('sabio')">üßô‚Äç‚ôÇÔ∏è S√ÅBIO</div>
    <div style="margin-top: auto;">
        <input type="password" id="api-key" placeholder="API KEY AQUI">
    </div>
</nav>

<main>
    <div id="inv" class="view active">
        <h3>ADICIONAR JOGOS (UM POR LINHA)</h3>
        <textarea id="mass-inv" placeholder="Cole sua lista aqui..."></textarea>
        <button class="btn" onclick="addMassa()">IMPORTAR JOGOS</button>
        <div class="grid" id="grid-inv" style="margin-top: 20px;"></div>
    </div>

    <div id="ideas" class="view">
        <h3>MUNDO DAS IDEIAS</h3>
        <input type="text" id="idea-name" placeholder="T√≠tulo da ideia">
        <textarea id="idea-desc" placeholder="Descri√ß√£o"></textarea>
        <button class="btn" onclick="addIdea()">SALVAR IDEIA</button>
        <div class="grid" id="grid-ideas" style="margin-top: 20px;"></div>
    </div>

    <div id="sabio" class="view">
        <h3>O GRANDE S√ÅBIO</h3>
        <div id="sabio-output" style="border-left: 2px solid var(--accent); padding: 20px; background: #0a0a0f;">
            Aguardando comando...
        </div>
        <button class="btn" onclick="consultarSabio()">PEDIR CONSELHO √Ä IA</button>
    </div>
</main>

<script>
    // Banco de dados Local
    let db = JSON.parse(localStorage.getItem('tao_db')) || { inventario: [], ideias: [] };

    function save() { 
        localStorage.setItem('tao_db', JSON.stringify(db)); 
        render(); 
    }

    function showView(id) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function addMassa() {
        const lines = document.getElementById('mass-inv').value.split('\n');
        lines.forEach(l => { if(l.trim()) db.inventario.push({ nome: l.trim() }) });
        document.getElementById('mass-inv').value = "";
        save();
    }

    function addIdea() {
        const nome = document.getElementById('idea-name').value;
        const desc = document.getElementById('idea-desc').value;
        if(nome) db.ideias.push({ nome, desc });
        save();
    }

    function render() {
        const gInv = document.getElementById('grid-inv');
        gInv.innerHTML = db.inventario.map(j => `
            <div class="card">
                <img src="https://external-content.duckduckgo.com/iu/?u=https://tse1.mm.bing.net/th?q=${encodeURIComponent(j.nome)}+game+cover">
                <strong>${j.nome}</strong>
                <a href="https://www.youtube.com/results?search_query=${j.nome}+gameplay" target="_blank" style="color:red; font-size: 10px; display:block; margin-top:5px;">YOUTUBE</a>
            </div>
        `).join('');

        const gId = document.getElementById('grid-ideas');
        gId.innerHTML = db.ideias.map(i => `<div class="card"><strong>${i.nome}</strong><p>${i.desc}</p></div>`).join('');
    }

    // Fun√ß√£o da IA simplificada para n√£o travar o site
    async function consultarSabio() {
        const key = document.getElementById('api-key').value;
        const out = document.getElementById('sabio-output');
        if(!key) return alert("Ponha a chave da IA!");

        out.innerText = "Pensando...";

        try {
            const resp = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${key}`, {
                method: 'POST',
                body: JSON.stringify({ contents: [{ parts: [{ text: "Me d√™ uma ideia de v√≠deo de jogo baseada em um jogo aleat√≥rio." }] }] })
            });
            const data = await resp.json();
            out.innerText = data.candidates[0].content.parts[0].text;
        } catch (e) {
            out.innerText = "Erro ao falar com a IA. Verifique sua chave.";
        }
    }

    render();
</script>
</body>
</html>
